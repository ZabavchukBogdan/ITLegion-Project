{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-ca7d24b5896c4568.js","src/shop.js","src/js/shopping-list.js","node_modules/@parcel/runtime-js/lib/runtime-246d7f17877b7a3f.js","src/js/markup-card-shopping-list.js","node_modules/@parcel/runtime-js/lib/runtime-74c0cc1585702c75.js","node_modules/@parcel/runtime-js/lib/runtime-b4a486ac3abeb402.js","node_modules/@parcel/runtime-js/lib/runtime-e81f7584eb93615b.js","node_modules/@parcel/runtime-js/lib/runtime-b8edac52e575f48f.js","node_modules/@parcel/runtime-js/lib/runtime-c1e399282096bd3b.js","node_modules/@parcel/runtime-js/lib/runtime-d39fccb6f017d0b8.js","node_modules/@parcel/runtime-js/lib/runtime-5f15442f7ae3c081.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"cotTm\\\":\\\"shop-list.a42bbbb6.js\\\",\\\"9v6fF\\\":\\\"symbol-defs.fac9ab6e.svg\\\",\\\"56mtE\\\":\\\"shop-bookdesk@1x.bbf7bc53.jpg\\\",\\\"7ZNsr\\\":\\\"amazon@1x.d254faae.png\\\",\\\"57u4y\\\":\\\"amazon@2x.24de444e.png\\\",\\\"4w5Ed\\\":\\\"apple@1x.9b2fbf78.png\\\",\\\"2wfxC\\\":\\\"apple@2x.fdf3a6a7.png\\\",\\\"2djck\\\":\\\"bookshop@1x.9b60ea58.png\\\",\\\"bvoP9\\\":\\\"bookshop@2x.927a7722.png\\\",\\\"geeHc\\\":\\\"shop-list.697a2565.js\\\"}\"));","import './js/darkTheme';\nimport './js/refs';\nimport './js/shopping-list';\nimport './js/markup-card-shopping-list';\nimport './js/header';\nimport './js/support-new';","import axios from 'axios';\nimport refs from './refs';\nimport {\n  markupBookForShoppingList,\n  markupEmptyPage,\n} from './markup-card-shopping-list';\n\nconst SHOPPING_LIST_KEY = 'shopping_list';\n\nfunction readBookListFromStorage() {\n  const listVal = localStorage.getItem(SHOPPING_LIST_KEY);\n\n  if (listVal) {\n    try {\n      return JSON.parse(listVal);\n    } catch (error) {}\n  }\n\n  return [];\n}\n\nfunction addBookToList(id) {\n  if (!id) {\n    return;\n  }\n\n  const list = readBookListFromStorage();\n\n  if (!list.includes(id)) {\n    list.push(id);\n    localStorage.setItem(SHOPPING_LIST_KEY, JSON.stringify(list));\n  }\n}\n\nfunction removeBookFromList(id, evt) {\n  const parentEl = evt.target.closest('div.wrapper-shopping-list');\n  parentEl.remove();\n\n  const list = readBookListFromStorage();\n  if (list.includes(id)) {\n    const idx = list.indexOf(id);\n    list.splice(idx, 1);\n    localStorage.setItem(SHOPPING_LIST_KEY, JSON.stringify(list));\n  }\n\n  if (list.length === 0) {\n    renderEmptyPage();\n  }\n}\n\nasync function fetchSavedBooks() {\n  const list = readBookListFromStorage();\n  const requests = [];\n\n  for (const bookId of list) {\n    requests.push(\n      axios.get(`https://books-backend.p.goit.global/books/${bookId}`)\n    );\n  }\n\n  const responses = await Promise.all(requests);\n\n  for (const res of responses) {\n    const book = res.data;\n    console.log(book);\n    renderBookById(book);\n  }\n}\n\nfunction renderEmptyPage() {\n  const markup = markupEmptyPage();\n  refs.listContainer.innerHTML = markup;\n}\n\nfetchSavedBooks();\n\nfunction renderBookById(book) {\n  const markup = markupBookForShoppingList(book);\n  refs.listContainer.insertAdjacentHTML('afterbegin', markup);\n}\n\nexport default { addBookToList };\n\nif (refs.listContainer) {\n  refs.listContainer.addEventListener('click', function (event) {\n    if (event.target.classList.contains('remove-from-shopping-list')) {\n      removeBookFromList(event.target.dataset.bookId, event);\n    }\n  });\n\n  // TODO: remove after development\n  addBookToList('643282b1e85766588626a080');\n  addBookToList('643282b1e85766588626a0ba');\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"9v6fF\")).toString();","const trashIconUrl = new URL('../images/symbol-defs.svg', import.meta.url);\ntrashIconUrl.hash = 'icon-trash';\n\nconst bookdeskIconUrl = new URL(\n  '../images/shop-bookdesk@1x.jpg',\n  import.meta.url\n);\n\nconst amazonIcon = new URL(\n  '../images/bookshops/amazon@1x.png',\n  import.meta.url\n);\n\nconst amazonIconRet = new URL(\n  '../images/bookshops/amazon@2x.png',\n  import.meta.url\n);\n\nconst appleIcon = new URL('../images/bookshops/apple@1x.png', import.meta.url);\n\nconst appleIconRet = new URL(\n  '../images/bookshops/apple@2x.png',\n  import.meta.url\n);\n\nconst booksIcon = new URL(\n  '../images/bookshops/bookshop@1x.png',\n  import.meta.url\n);\n\nconst booksIconRet = new URL(\n  '../images/bookshops/bookshop@2x.png',\n  import.meta.url\n);\n\nexport function markupBookForShoppingList({\n  _id,\n  book_image,\n  title,\n  list_name,\n  description,\n  author,\n  buy_links,\n}) {\n  return `<div class=\"wrapper-shopping-list\">\n  <div class=\"wrapper-img-shopping-list\"><img src=\"${\n    book_image ||\n    'https://storage.googleapis.com/du-prd/books/images/9780063226050.jpg'\n  }\" alt=\"${title}\"></div>\n    <div class=\"wrapper-text-shopping-list\"> \n    <h2 class=\"title-book-shopping-list\">${title}</h2>\n    <h3 class=\"category-book-shopping-list\">${list_name}</h3>\n    <p class=\"description-book-shopping-list\">${\n      description ||\n      'In a homage to Louisa May Alcott’s “Little Women,” a young man’s dark past resurfaces as he gets to the know the family of his college sweetheart.'\n    }</p>\n    <div class=\"bottom-wrapper-shopping-list\">\n      <p class=\"author-book-shopping-list\">${author}</p>\n      <ul class=\"shops-shopping-list\">\n        <li>\n          <a href=\"${\n            buy_links[0].url\n          }\" class=\"shop-item-shopping-list\" target=\"_blank\">\n            <img\n              srcset=\"${amazonIcon} 1x, ${amazonIconRet} 2x\"\n              src=\"${amazonIcon}\"\n              alt=\"Amazon\"\n              class=\"amazon-image-shopping-list\"\n              width=\"48\"\n              height=\"15\"\n            />\n          </a>\n        </li>\n        <li>\n          <a href=\"${\n            buy_links[1].url\n          }\" class=\"shop-item-shopping-list\" target=\"_blank\">\n            <img\n              srcset=\"${appleIcon} 1x, ${appleIconRet} 2x\"\n              src=\"${appleIcon}\"\n              alt=\"Apple Book\"\n              class=\"apple-image-shopping-list\"\n              width=\"28\"\n              height=\"27\"\n            />\n          </a>\n        </li>\n        <li>\n          <a href=\"${\n            buy_links[4].url\n          }\" class=\"shop-item-shopping-list\" target=\"_blank\">\n            <img\n              srcset=\"${booksIcon} 1x, ${booksIconRet} 2x\"\n              src=\"${booksIcon}\"\n              alt=\"Bookshop\"\n              class=\"books-image-shopping-list\"\n              width=\"32\"\n              height=\"30\"\n            />\n          </a>\n        </li>\n\n      </ul>\n    </div></div>\n    <button class=\"remove-from-shopping-list\" data-book-id=\"${_id}\">\n      <svg class=\"remove-icon\" width=\"16\" height=\"16\">\n        <use href=\"${trashIconUrl}\"></use>\n      </svg>\n    </button>\n    </div>\n   `;\n}\n\nexport function markupEmptyPage() {\n  return `<p class=\"empty-shopping-list\">This page is empty, add some books and proceed to order.</p>\n  <img\n    src=\"${bookdeskIconUrl}\"\n    alt=\"\"\n    class=\"image-empty-shopping-list\"\n    width=\"200\"\n    height=\"300\"\n  />`;\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"56mtE\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"7ZNsr\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"57u4y\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"4w5Ed\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"2wfxC\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"2djck\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"bvoP9\")).toString();"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$2shzp","$10db6f286535da77$exports","URL","resolve","import","meta","url","toString","$7a67e3e4c4a69599$var$trashIconUrl","hash","$dec100f681fa5bc5$exports","$7a67e3e4c4a69599$var$bookdeskIconUrl","$20cd3b9a4f9ca0db$exports","$7a67e3e4c4a69599$var$amazonIcon","$b89e20488a4c3401$exports","$7a67e3e4c4a69599$var$amazonIconRet","$7659a405f6ba5e40$exports","$7a67e3e4c4a69599$var$appleIcon","$7baa8a17c27478ec$exports","$7a67e3e4c4a69599$var$appleIconRet","$ee7b7a3f12ae9c33$exports","$7a67e3e4c4a69599$var$booksIcon","$b757cb66b7805b7d$exports","$7a67e3e4c4a69599$var$booksIconRet","$7a67e3e4c4a69599$export$446a37ac3ca19894","_id","book_image","title","list_name","description","author","buy_links","$7a67e3e4c4a69599$export$595a0b3a834024dd","$e5c62ffd1c5d842f$var$readBookListFromStorage","listVal","localStorage","getItem","error","$e5c62ffd1c5d842f$var$addBookToList","list","includes","push","setItem","stringify","$e5c62ffd1c5d842f$var$removeBookFromList","evt","target","closest","remove","idx","indexOf","splice","markup","$krGWQ","default","listContainer","innerHTML","$e5c62ffd1c5d842f$var$renderEmptyPage","$e5c62ffd1c5d842f$var$renderBookById","book","insertAdjacentHTML","async","requests","bookId","get","responses","Promise","all","res","data","console","log","$e5c62ffd1c5d842f$var$fetchSavedBooks","addEventListener","event","classList","contains","dataset"],"version":3,"file":"shop-list.a42bbbb6.js.map"}