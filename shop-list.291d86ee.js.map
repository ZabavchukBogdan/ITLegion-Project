{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-1b1b48f17776e6c4.js","src/shop.js","src/js/shopping-list.js","node_modules/@parcel/runtime-js/lib/runtime-875eb63bf3f91f32.js","src/js/markup-card-shopping-list.js","node_modules/@parcel/runtime-js/lib/runtime-5b95406a983b4713.js","node_modules/@parcel/runtime-js/lib/runtime-8800c20cb04cf118.js","node_modules/@parcel/runtime-js/lib/runtime-5839af8ad8c8e13d.js","node_modules/@parcel/runtime-js/lib/runtime-33dc63fe149285db.js","node_modules/@parcel/runtime-js/lib/runtime-2cf484737ded3c14.js","node_modules/@parcel/runtime-js/lib/runtime-8013e7fee5b12977.js","node_modules/@parcel/runtime-js/lib/runtime-76548823a8242b72.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"2mR6f\\\":\\\"shop-list.291d86ee.js\\\",\\\"kxKJ3\\\":\\\"symbol-defs.3ea6cdb6.svg\\\",\\\"3LSzh\\\":\\\"shop-bookdesk@1x.bbf7bc53.jpg\\\",\\\"2kw6b\\\":\\\"amazon@1x.c829ac70.png\\\",\\\"7lxR1\\\":\\\"amazon@2x.24de444e.png\\\",\\\"hgtzv\\\":\\\"apple@1x.9b2fbf78.png\\\",\\\"4gokh\\\":\\\"apple@2x.fdf3a6a7.png\\\",\\\"jI19x\\\":\\\"bookshop@1x.9b60ea58.png\\\",\\\"dOsnV\\\":\\\"bookshop@2x.927a7722.png\\\",\\\"9ke9W\\\":\\\"shop-list.ce6c23f3.js\\\"}\"));","import './js/darkTheme';\nimport './js/refs';\nimport './js/shopping-list';\nimport './js/markup-card-shopping-list';\nimport './js/header';\nimport './js/support-new';","import axios from 'axios';\nimport refs from './refs';\nimport {\n  markupBookForShoppingList,\n  markupEmptyPage,\n} from './markup-card-shopping-list';\n\nconst SHOPPING_LIST_KEY = 'shopping_list';\n\nfunction readBookListFromStorage() {\n  const listVal = localStorage.getItem(SHOPPING_LIST_KEY);\n\n  if (listVal) {\n    try {\n      return JSON.parse(listVal);\n    } catch (error) {}\n  }\n\n  return [];\n}\n\nexport function isBookInList(id) {\n  if (!id) {\n    return false;\n  }\n\n  const list = readBookListFromStorage();\n\n  return list.includes(id);\n}\n\nexport function addBookToList(id) {\n  if (!id) {\n    return;\n  }\n\n  const list = readBookListFromStorage();\n\n  if (!list.includes(id)) {\n    list.push(id);\n    localStorage.setItem(SHOPPING_LIST_KEY, JSON.stringify(list));\n  }\n}\n\nexport function removeBookFromList(id) {\n  if (!id) {\n    return;\n  }\n\n  const list = readBookListFromStorage();\n\n  if (list.includes(id)) {\n    const idx = list.indexOf(id);\n    list.splice(idx, 1);\n    localStorage.setItem(SHOPPING_LIST_KEY, JSON.stringify(list));\n  }\n}\n\nasync function fetchSavedBooks() {\n  const list = readBookListFromStorage();\n  const requests = [];\n\n  for (const bookId of list) {\n    requests.push(\n      axios.get(`https://books-backend.p.goit.global/books/${bookId}`)\n    );\n  }\n\n  const responses = await Promise.all(requests);\n\n  for (const res of responses) {\n    const book = res.data;\n    renderBookById(book);\n  }\n}\n\nfunction renderEmptyPage() {\n  const markup = markupEmptyPage();\n  refs.listContainer.innerHTML = markup;\n}\n\nfunction renderBookById(book) {\n  const markup = markupBookForShoppingList(book);\n  refs.listContainer.insertAdjacentHTML('afterbegin', markup);\n}\n\nif (refs.listContainer) {\n  fetchSavedBooks();\n\n  refs.listContainer.addEventListener('click', function (event) {\n    if (event.target.closest('.remove-from-shopping-list')) {\n      removeBookFromList(event.target.dataset.bookId, event);\n\n      const parentEl = event.target.closest('div.wrapper-shopping-list');\n      parentEl.remove();\n\n      const list = readBookListFromStorage();\n\n      if (list.length === 0) {\n        renderEmptyPage();\n      }\n    }\n  });\n}\n","module.exports = require('./helpers/bundle-url').getBundleURL('2mR6f') + require('./helpers/bundle-manifest').resolve(\"kxKJ3\");","const trashIconUrl = new URL('../images/symbol-defs.svg', import.meta.url);\ntrashIconUrl.hash = 'icon-trash';\n\nconst bookdeskIconUrl = new URL(\n  '../images/shop-bookdesk@1x.jpg',\n  import.meta.url\n);\n\nconst amazonIcon = new URL('../images/amazon@1x.png', import.meta.url);\nconst amazonIconRet = new URL(\n  '../images/bookshops/amazon@2x.png',\n  import.meta.url\n);\nconst appleIcon = new URL('../images/bookshops/apple@1x.png', import.meta.url);\nconst appleIconRet = new URL(\n  '../images/bookshops/apple@2x.png',\n  import.meta.url\n);\nconst booksIcon = new URL(\n  '../images/bookshops/bookshop@1x.png',\n  import.meta.url\n);\nconst booksIconRet = new URL(\n  '../images/bookshops/bookshop@2x.png',\n  import.meta.url\n);\n\nexport function markupBookForShoppingList({\n  _id,\n  book_image,\n  title,\n  list_name,\n  description,\n  author,\n  buy_links,\n}) {\n  return `<div class=\"wrapper-shopping-list\">\n  <div class=\"wrapper-img-shopping-list\"><img src=\"${\n    book_image ||\n    'https://storage.googleapis.com/du-prd/books/images/9780063226050.jpg'\n  }\" alt=\"${title}\"></div>\n    <div class=\"wrapper-text-shopping-list\"> \n    <h2 class=\"title-book-shopping-list\">${title}</h2>\n    <h3 class=\"category-book-shopping-list\">${list_name}</h3>\n    <p class=\"description-book-shopping-list\">${\n      description || 'Coming soon'\n    }</p>\n    <div class=\"bottom-wrapper-shopping-list\">\n      <p class=\"author-book-shopping-list\">${author || 'Coming soon'}</p>\n      <ul class=\"shops-shopping-list\">\n        <li>\n          <a href=\"${\n            buy_links[0].url\n          }\" class=\"shop-item-shopping-list\" target=\"_blank\">\n            <img\n              srcset=\"${amazonIcon} 1x, ${amazonIconRet} 2x\"\n              src=\"${amazonIcon}\"\n              alt=\"Amazon\"\n              class=\"amazon-image-shopping-list\"\n              width=\"48\"\n              height=\"15\"\n            />\n          </a>\n        </li>\n        <li>\n          <a href=\"${\n            buy_links[1].url\n          }\" class=\"shop-item-shopping-list\" target=\"_blank\">\n            <img\n              srcset=\"${appleIcon} 1x, ${appleIconRet} 2x\"\n              src=\"${appleIcon}\"\n              alt=\"Apple Book\"\n              class=\"apple-image-shopping-list\"\n              width=\"28\"\n              height=\"27\"\n            />\n          </a>\n        </li>\n        <li>\n          <a href=\"${\n            buy_links[4].url\n          }\" class=\"shop-item-shopping-list\" target=\"_blank\">\n            <img\n              srcset=\"${booksIcon} 1x, ${booksIconRet} 2x\"\n              src=\"${booksIcon}\"\n              alt=\"Bookshop\"\n              class=\"books-image-shopping-list\"\n              width=\"32\"\n              height=\"30\"\n            />\n          </a>\n        </li>\n\n      </ul>\n    </div></div>\n    <button class=\"remove-from-shopping-list\" data-book-id=\"${_id}\">\n      <svg class=\"remove-icon\" width=\"16\" height=\"16\">\n        <use href=\"${trashIconUrl}\"></use>\n      </svg>\n    </button>\n    </div>\n   `;\n}\n\nexport function markupEmptyPage() {\n  return `<p class=\"empty-shopping-list\">This page is empty, add some books and proceed to order.</p>\n  <img\n    src=\"${bookdeskIconUrl}\"\n    alt=\"\"\n    class=\"image-empty-shopping-list\"\n    width=\"200\"\n    height=\"300\"\n  />`;\n}\n","module.exports = require('./helpers/bundle-url').getBundleURL('2mR6f') + require('./helpers/bundle-manifest').resolve(\"3LSzh\");","module.exports = require('./helpers/bundle-url').getBundleURL('2mR6f') + require('./helpers/bundle-manifest').resolve(\"2kw6b\");","module.exports = require('./helpers/bundle-url').getBundleURL('2mR6f') + require('./helpers/bundle-manifest').resolve(\"7lxR1\");","module.exports = require('./helpers/bundle-url').getBundleURL('2mR6f') + require('./helpers/bundle-manifest').resolve(\"hgtzv\");","module.exports = require('./helpers/bundle-url').getBundleURL('2mR6f') + require('./helpers/bundle-manifest').resolve(\"4gokh\");","module.exports = require('./helpers/bundle-url').getBundleURL('2mR6f') + require('./helpers/bundle-manifest').resolve(\"jI19x\");","module.exports = require('./helpers/bundle-url').getBundleURL('2mR6f') + require('./helpers/bundle-manifest').resolve(\"dOsnV\");"],"names":["$0380ce8f1f064ccc$export$6503ec6e8aabbaf","$0380ce8f1f064ccc$export$f7ad0328861e2f03","$0380ce8f1f064ccc$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$7dd1ddf6834435ca$export$bdfd709ae4826697","$7dd1ddf6834435ca$var$bundleURL","$7dd1ddf6834435ca$var$getBaseURL","url","replace","value","err","matches","stack","match","$7dd1ddf6834435ca$var$getBundleURL","parcelRequire","register","JSON","parse","$bpxeT","$1220aef2bcb872f7$exports","getBundleURL","resolve","$55291c9d1ba081f9$var$trashIconUrl","URL","hash","$7cf36c961b702701$exports","$55291c9d1ba081f9$var$bookdeskIconUrl","$3e83ac15c023eebd$exports","$55291c9d1ba081f9$var$amazonIcon","$699ccc328999a9ce$exports","$55291c9d1ba081f9$var$amazonIconRet","$e64851b47fcf3a77$exports","$55291c9d1ba081f9$var$appleIcon","$de43d74390f88e8e$exports","$55291c9d1ba081f9$var$appleIconRet","$2503aaa38de68d58$exports","$55291c9d1ba081f9$var$booksIcon","$073a73ce3faad872$exports","$55291c9d1ba081f9$var$booksIconRet","$399cd7aec2522034$var$SHOPPING_LIST_KEY","$399cd7aec2522034$var$readBookListFromStorage","listVal","localStorage","getItem","error","$399cd7aec2522034$var$_fetchSavedBooks","$parcel$interopDefault","$2TvXO","mark","_callee","list","requests","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","bookId","responses","_iteratorNormalCompletion1","_didIteratorError1","_iteratorError1","_iterator1","_step1","res","undefined","Symbol","iterator","next","done","push","$dIxxU","default","get","concat","_ctx","t0","return","Promise","all","sent","$399cd7aec2522034$var$renderBookById","data","t1","apply","this","arguments","$399cd7aec2522034$var$renderEmptyPage","markup","$4Nugj","listContainer","innerHTML","book","param","_id","book_image","title","list_name","description","author","buy_links","insertAdjacentHTML","$399cd7aec2522034$var$fetchSavedBooks","addEventListener","event","target","closest","includes","idx","indexOf","splice","setItem","stringify","$399cd7aec2522034$export$d41d5bdedb4f7bff","dataset","remove"],"version":3,"file":"shop-list.291d86ee.js.map"}