function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},a=e.parcelRequired7c6;null==a&&((a=function(t){if(t in n)return n[t].exports;if(t in o){var e=o[t];delete o[t];var a={id:t,exports:{}};return n[t]=a,e.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(t,e){o[t]=e},e.parcelRequired7c6=a),a("kyEFX").register(JSON.parse('{"5ZPII":"index.7590781e.js","9v6fF":"symbol-defs.6d91c32e.svg","gB3Gx":"amazon@1x.626c9508.png","6p5Hd":"amazon@2x.104a65be.png","ahrpz":"apple@1x.652b354e.png","5NjQq":"apple@2x.15632d7d.png","lOHTt":"books@1x.1d091ebd.png","lLaNQ":"books@2x.1f77f032.png","9Jxmw":"index.a79b0d08.css","geeHc":"shop-list.10593ea3.js"}')),a("it0VB"),a("krGWQ");var i=a("krGWQ"),s=a("2shzp");i=a("krGWQ");async function r(){try{S((await s.default.get("https://books-backend.p.goit.global/books/top-books")).data)}catch(t){console.log(t)}}async function l(t){try{const e=await s.default.get(`https://books-backend.p.goit.global/books/category?category=${t}`);console.log(e.data),$(e.data,t)}catch(t){console.log(t)}}async function c(t=""){return(await s.default.get(`https://books-backend.p.goit.global/books/${t}`)).data}r(),i.default.mainGalleryEl.addEventListener("click",(function(t){t.target.dataset.cat&&l(t.target.dataset.cat)}));var d,u=/^\s+|\s+$/g,f=/^[-+]0x[0-9a-f]+$/i,b=/^0b[01]+$/i,g=/^0o[0-7]+$/i,p=parseInt,m="object"==typeof e&&e&&e.Object===Object&&e,v="object"==typeof self&&self&&self.Object===Object&&self,h=m||v||Function("return this")(),y=Object.prototype.toString,k=Math.max,E=Math.min,_=function(){return h.Date.now()};function L(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function w(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==y.call(t)}(t))return NaN;if(L(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=L(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(u,"");var n=b.test(t);return n||g.test(t)?p(t.slice(2),n?2:8):f.test(t)?NaN:+t}function x(t){return t.map((t=>t.title.length<17?`<div class="book-card-wrapper js-target" data-idbook="${t._id}"><a class="overlay " href="#">\n            <img class="js-target" src="${t.book_image}" alt="${t.title}" height="256" loading="lazy"/>\n             <div class="overlay-field js-target">\n              <p class="overlay-text">QUICK VIEW</p>\n            </div> \n            <p class="book-name js-target" >${t.title}</p>\n            <p class="book-author js-target" >${t.author}</p>\n          </a></div>`:`<div class="book-card-wrapper js-target"  data-idbook="${t._id}"><a class="overlay " href="#">\n            <img class="js-target" src="${t.book_image}" alt="${t.title}" height="256" loading="lazy"/> \n           <div class="overlay-field js-target">\n              <p class="overlay-text">QUICK VIEW</p>\n            </div>\n            <p class="book-name js-target" >${t.title.split("").slice(0,17).join("")}...</p>\n            <p class="book-author js-target" >${t.author}</p>\n          </a></div>`)).join("")}function $(t,e){i.default.mainGalleryEl.innerHTML="";let n=Math.trunc(e.split(" ").length/2);i.default.mainGalleryTitleEl.innerHTML=`${e.split(" ").splice(0,n).join(" ")} \n  <span class="category-title-span">${e.split(" ").splice(n,n).join(" ")}</span>`;let o="";o=x(t),i.default.mainGalleryEl.classList.add("gal-category"),i.default.mainGalleryEl.insertAdjacentHTML("beforeend",o)}function S(t){i.default.mainGalleryEl.classList.remove("gal-category"),i.default.mainGalleryTitleEl.innerHTML="Best Sellers <span class='category-title-span'>Books</span>",i.default.mainGalleryEl.innerHTML="";let e="";e=t.map((t=>window.innerWidth>=1440?`<div class="books-category">\n          <p class="books-category-title">${t.list_name}</p>\n          <ul>\n            <li class="books__list">${x(t.books)}</li>\n          </ul>\n          <button class="button-see-more" type="button" data-cat="${t.list_name}">SEE MORE</button>\n        </div>`:window.innerWidth>=768?`<div class="books-category">\n          <p class="books-category-title">${t.list_name}</p>\n          <ul>\n            <li class="books__list">${x(t.books.slice(0,3))}</li>\n          </ul>\n          <button class="button-see-more" type="button" data-cat="${t.list_name}">SEE MORE</button>\n        </div>`:`<div class="books-category">\n          <p class="books-category-title">${t.list_name}</p>\n          <ul>\n            <li class="books__list">${x(t.books.slice(0,1))}</li>\n          </ul>\n          <button class="button-see-more" type="button" data-cat="${t.list_name}">SEE MORE</button>\n        </div>`)).join(""),i.default.mainGalleryEl.insertAdjacentHTML("beforeend",e)}d=function(t,e,n){var o,a,i,s,r,l,c=0,d=!1,u=!1,f=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function b(e){var n=o,i=a;return o=a=void 0,c=e,s=t.apply(i,n)}function g(t){return c=t,r=setTimeout(m,e),d?b(t):s}function p(t){var n=t-l;return void 0===l||n>=e||n<0||u&&t-c>=i}function m(){var t=_();if(p(t))return v(t);r=setTimeout(m,function(t){var n=e-(t-l);return u?E(n,i-(t-c)):n}(t))}function v(t){return r=void 0,f&&o?b(t):(o=a=void 0,s)}function h(){var t=_(),n=p(t);if(o=arguments,a=this,l=t,n){if(void 0===r)return g(l);if(u)return r=setTimeout(m,e),b(l)}return void 0===r&&(r=setTimeout(m,e)),s}return e=w(e)||0,L(n)&&(d=!!n.leading,i=(u="maxWait"in n)?k(w(n.maxWait)||0,e):i,f="trailing"in n?!!n.trailing:f),h.cancel=function(){void 0!==r&&clearTimeout(r),c=0,o=l=a=r=void 0},h.flush=function(){return void 0===r?s:v(_())},h},window.addEventListener("resize",t(d)((()=>{r()}),100));var H={};H=function t(e,n,o){function a(s,r){if(!n[s]){if(!e[s]){var l=void 0;if(!r&&l)return l(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[s]={exports:{}};e[s][0].call(d.exports,(function(t){return a(e[s][1][t]||t)}),d,d.exports,t,e,n,o)}return n[s].exports}for(var i=void 0,s=0;s<o.length;s++)a(o[s]);return a}({1:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.create=n.visible=void 0;var o=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=document.createElement("div");return n.innerHTML=t.trim(),!0===e?n.children:n.firstChild},a=function(t,e){var n=t.children;return 1===n.length&&n[0].tagName===e},i=function(t){return null!=(t=t||document.querySelector(".basicLightbox"))&&!0===t.ownerDocument.body.contains(t)};n.visible=i,n.create=function(t,e){var n=function(t,e){var n=o('\n\t\t<div class="basicLightbox '.concat(e.className,'">\n\t\t\t<div class="basicLightbox__placeholder" role="dialog"></div>\n\t\t</div>\n\t')),i=n.querySelector(".basicLightbox__placeholder");t.forEach((function(t){return i.appendChild(t)}));var s=a(i,"IMG"),r=a(i,"VIDEO"),l=a(i,"IFRAME");return!0===s&&n.classList.add("basicLightbox--img"),!0===r&&n.classList.add("basicLightbox--video"),!0===l&&n.classList.add("basicLightbox--iframe"),n}(t=function(t){var e="string"==typeof t,n=t instanceof HTMLElement==1;if(!1===e&&!1===n)throw new Error("Content must be a DOM element/node or string");return!0===e?Array.from(o(t,!0)):"TEMPLATE"===t.tagName?[t.content.cloneNode(!0)]:Array.from(t.children)}(t),e=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null==(t=Object.assign({},t)).closable&&(t.closable=!0),null==t.className&&(t.className=""),null==t.onShow&&(t.onShow=function(){}),null==t.onClose&&(t.onClose=function(){}),"boolean"!=typeof t.closable)throw new Error("Property `closable` must be a boolean");if("string"!=typeof t.className)throw new Error("Property `className` must be a string");if("function"!=typeof t.onShow)throw new Error("Property `onShow` must be a function");if("function"!=typeof t.onClose)throw new Error("Property `onClose` must be a function");return t}(e)),s=function(t){return!1!==e.onClose(r)&&function(t,e){return t.classList.remove("basicLightbox--visible"),setTimeout((function(){return!1===i(t)||t.parentElement.removeChild(t),e()}),410),!0}(n,(function(){if("function"==typeof t)return t(r)}))};!0===e.closable&&n.addEventListener("click",(function(t){t.target===n&&s()}));var r={element:function(){return n},visible:function(){return i(n)},show:function(t){return!1!==e.onShow(r)&&function(t,e){return document.body.appendChild(t),setTimeout((function(){requestAnimationFrame((function(){return t.classList.add("basicLightbox--visible"),e()}))}),10),!0}(n,(function(){if("function"==typeof t)return t(r)}))},close:s};return r}},{}]},{},[1])(1);var T;i=a("krGWQ");T=new URL(a("kyEFX").resolve("gB3Gx"),import.meta.url).toString();var j;j=new URL(a("kyEFX").resolve("6p5Hd"),import.meta.url).toString();var O;O=new URL(a("kyEFX").resolve("ahrpz"),import.meta.url).toString();var M;M=new URL(a("kyEFX").resolve("5NjQq"),import.meta.url).toString();var F;F=new URL(a("kyEFX").resolve("lOHTt"),import.meta.url).toString();var R;R=new URL(a("kyEFX").resolve("lLaNQ"),import.meta.url).toString();var N;N=new URL(a("kyEFX").resolve("9v6fF"),import.meta.url).toString();var C=a("jJ57b");function G({_id:e,book_image:n,author:o,description:a,title:i,buy_links:s}){const r=(0,C.isBookInList)(e);return`\n    <div class="modal_book">\n      <button class="modal_book-btn-close" type="button" data-modal-close>\n      <svg width="28" height="28">\n      <use class="modal_book-svg" href="${t(N)}#icon-x""></use>\n    </svg>\n      \n      </button>\n      <div class="modal_book-detail">\n        <img class="modal_book-img" src="${n}" alt="${i}" />\n        <div class="modal_book-info">\n          <h2 class="modal_book-info-name">${i}</h2>\n          <p class="modal_book-info-author">${o||"Coming soon"}</p>\n          <p class="modal_book-info-descrip">${a||"Coming soon"}</p>\n\n          <div class="modal_book-icons">\n          <a href="${s[0].url}" class="modal_book-one-icon" target="_blank">\n            <img\n              srcset="${t(T)} 1x, ${t(j)} 2x"\n              src="${t(T)}"\n              alt="Amazon"\n              class="modal-icons modal-icon-amazon"\n              width="62"\n              height="19"\n            />\n          </a>\n          <a href="${s[1].url}" class="modal_book-one-icon" target="_blank">\n            <img\n              srcset="${t(O)} 1x, ${t(M)} 2x"\n              src="${t(O)}"\n              alt="Apple Books"\n              class="modal-icons"\n              width="33"\n              height="32"\n            />\n          </a>\n          <a href="${s[4].url}" class="modal_book-one-icon" target="_blank">\n            <img\n              srcset="${t(F)} 1x, ${t(R)} 2x"\n              src="${t(F)}"\n              alt="Bookshop"\n              class="modal-icons"\n              width="38"\n              height="36"\n            />\n          </a>\n        </div>\n        </div>\n      </div>\n        <button class="modal_book-btn js-modal_book-btn ${r?"in-list":""}" type="button">\n        ${r?"REMOVE FROM SHOPPING LIST":"ADD TO SHOPPING LIST"}\n      </button>\n\n      <p class="modal_book-note js-modal_book-note" ${r?"":"hidden"}>\n        Сongratulations! You have added the book to the shopping list. To delete,\n        press the button “Remove from the shopping list”.\n      </p>\n    </div>\n  `}C=a("jJ57b");i.default.mainGalleryEl.addEventListener("click",(function(t){t.preventDefault();const{target:e}=t;if(!e.classList.contains("js-target"))return;c(e.dataset.idbook??e.closest(".book-card-wrapper").dataset.idbook).then((t=>function(t){const e=H.create(G(t),{onShow:e=>{window.addEventListener("keydown",(function(t){"Escape"===t.key&&e.close()})),e.element().querySelector(".js-modal_book-btn").addEventListener("click",(e=>{const n=document.querySelector(".js-modal_book-note");e.target.classList.contains("in-list")?(e.target.textContent="REMOVE FROM SHOPPING LIST",(0,C.removeBookFromList)(t._id),e.target.classList.remove("in-list"),e.target.textContent="ADD TO SHOPPING LIST",n.hidden=!0):((0,C.addBookToList)(t._id),e.target.classList.add("in-list"),e.target.textContent="REMOVE FROM SHOPPING LIST",n.hidden=!1)}))},onClose:t=>window.removeEventListener("keydown",(function(e){"Escape"===e.key&&t.close()}))});e.show();function n(){e.close()}document.querySelector(".modal_book-btn-close").addEventListener("click",n)}(t)))})),a("1Hbd7");i=a("krGWQ");function A(t){t.parentNode.classList.add("active"),t.classList.add("category-active")}function I(t){for(let e=0;e<t.length;e++)t[e].classList.contains("active")&&(t[e].classList.remove("active"),t[e].firstChild.classList.remove("category-active"))}(async function(){return await s.default.get("https://books-backend.p.goit.global/books/category-list")})().then((async t=>{const e=t.data;if(0===e.length)return void(i.default.categoriesList.innerHTML='<li class="category-list-item"><p class="categories-err">The list of categories is empty</p></li>');const n='<li class="category-list-item active"><button type="button" class="category category-active">All categories</button></li>'+function(t){return t.map((({list_name:t})=>`<li class="category-list-item"><button type="button" class="category">${t}</button></li>`)).join("")}(e);i.default.categoriesList.innerHTML=n})).catch((t=>{i.default.categoriesList.innerHTML='<li class="category-list-item"><p class="categories-err">The list of categories is empty</p></li>'})),i.default.categoriesList.addEventListener("click",(function(t){const e=t.target,n=[...t.currentTarget.children];if(e.classList.contains("category")){if("All categories"===e.textContent)return I(n),A(e),void r();i.default.mainGalleryEl.innerHTML="",l(e.textContent)}e.classList.contains("category")&&(I(n),A(e))})),i.default.mainGalleryEl.addEventListener("click",(function(t){const e=t.target.dataset.cat,n=[...i.default.categoriesList.children];if(e)for(let t=0;t<n.length;t++)n[t].firstChild.textContent===e&&(I(n),A(n[t].firstChild))})),a("bUb57"),a("aFumo");const P=document.querySelector(".scrollup-button");P.addEventListener("click",(function(){window.scrollTo({top:0,behavior:"smooth"}),P.hidden=!0})),P.hidden=!0,window.addEventListener("scroll",(()=>{window.scrollY>812?P.hidden=!1:P.hidden=!0}));
//# sourceMappingURL=index.7590781e.js.map
