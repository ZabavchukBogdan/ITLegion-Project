{"mappings":"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","sources":["src/index.js","src/js/render-main-gallery.js","src/js/all-requests.js","src/js/categories-list-markup.js"],"sourcesContent":["import './js/darkTheme';\nimport './js/refs';\nimport './js/render-main-gallery';\nimport './js/all-requests';\nimport './js/support-ukraine';\nimport './js/autorization-modal';\nimport './js/categories-list-markup';\n\n\n\n\n\n\n","import refs from './refs';\n\nexport function renderRowGallery(row) {\n  return row\n    .map(elem =>\n      elem.title.length < 17\n        ? `<div class=\"book-card-wrapper\" data-idbook=\"${elem._id}\"><a href=\"#\">\n            <img src=\"${elem.book_image}\" alt=\"${elem.title}\" height=\"256\" loading=\"lazy\"/> \n            <p class=\"book-name\">${elem.title}</p>\n            <p class=\"book-author\">${elem.author}</p>\n          </a></div>`\n        : `<div class=\"book-card-wrapper\" data-idbook=\"${elem._id}\"><a  href=\"#\">\n            <img src=\"${elem.book_image}\" alt=\"${\n            elem.title\n          }\" height=\"256\" loading=\"lazy\"/> \n            <p class=\"book-name\">${elem.title\n              .split('')\n              .slice(0, 17)\n              .join('')}...</p>\n            <p class=\"book-author\">${elem.author}</p>\n          </a></div>`\n    )\n    .join('');\n}\n\n// функція створення заголовку заголовку групи книг\nexport function renderGalleryCat(books, cat) {\n  refs.mainGalleryEl.innerHTML = '';\n  let idx = Math.trunc(cat.split(' ').length / 2);\n  refs.mainGalleryTitleEl.innerHTML = `${cat\n    .split(' ')\n    .splice(0, idx)\n    .join(' ')} \n  <span class=\"category-title-span\">${cat\n    .split(' ')\n    .splice(idx, idx)\n    .join(' ')}</span>`;\n  let markUp = '';\n  markUp = renderRowGallery(books);\n  refs.mainGalleryEl.classList.add('gal-category');\n  refs.mainGalleryEl.insertAdjacentHTML('beforeend', markUp);\n}\n\nexport function renderGallery(books) {\n  refs.mainGalleryEl.classList.remove('gal-category');\n  refs.mainGalleryTitleEl.innerHTML =\n    \"Best Sellers <span class='category-title-span'>Books</span>\";\n  refs.mainGalleryEl.innerHTML = '';\n  let markUp = '';\n  markUp = books\n    .map(elem =>\n      window.innerWidth >= 1440\n        ? `<div class=\"books-category\">\n          <p class=\"books-category-title\">${elem.list_name}</p>\n          <ul\">\n            <li class=\"books__list\">${renderRowGallery(elem.books)}</li>\n          </ul>\n          <button class=\"button-see-more\" type=\"button\" data-cat=\"${\n            elem.list_name\n          }\">SEE MORE</button>\n        </div>`\n        : window.innerWidth >= 768\n        ? `<div class=\"books-category\">\n          <p class=\"books-category-title\">${elem.list_name}</p>\n          <ul\">\n            <li class=\"books__list\">${renderRowGallery(\n              elem.books.slice(0, 3)\n            )}</li>\n          </ul>\n          <button class=\"button-see-more\" type=\"button\" data-cat=\"${\n            elem.list_name\n          }\">SEE MORE</button>\n        </div>`\n        : `<div class=\"books-category\">\n          <p class=\"books-category-title\">${elem.list_name}</p>\n          <ul\">\n            <li class=\"books__list\">${renderRowGallery(\n              elem.books.slice(0, 1)\n            )}</li>\n          </ul>\n          <button class=\"button-see-more\" type=\"button\" data-cat=\"${\n            elem.list_name\n          }\">SEE MORE</button>\n        </div>`\n    )\n    .join('');\n\n  refs.mainGalleryEl.insertAdjacentHTML('beforeend', markUp);\n}","// import axios from 'axios';\n// export const BASE_URL = 'https://books-backend.p.goit.global/books/';\n\n// const booksCategoriesEndpoit = 'category-list';\n// const topBooksEndpoint = 'top-books';\n// const booksCategoryEndpoint = 'category';\n\n// // Повертає об'єкт з властивістю data, його значення = масив обєктів (всі категорії)\n// export async function getCategories() {\n//   try {\n//     const response = await axios.get(`${BASE_URL}${booksCategoriesEndpoit}`);\n//     return response.data;\n//   } catch (error) {\n//     console.log(error);\n//     return error;\n//   }\n// }\n\n// // Повертає об'єкт з властивістю data, його значення = масив обєктів (всі категорії), в кожному обєкті значення властивості books = масив з топовими книгами\n// export async function getTopBooks() {\n//   const response = await axios.get(`${BASE_URL}${topBooksEndpoint}`);\n//   const topBooksArr = response.data.flatMap(item => item.books);\n//   return topBooksArr;\n// }\nimport axios from 'axios';\nimport { renderGallery, renderGalleryCat } from './render-main-gallery';\nimport refs from './refs';\n\nconst BASE_URL = 'https://books-backend.p.goit.global/books/';\n\n//  отримання даних по топовим книгам\nexport async function mainGallery() {\n  try {\n    const response = await axios.get(`${BASE_URL}top-books`);\n    renderGallery(response.data);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\n//  отримання даних по  категоріям\nexport async function mainGalleryCategory(cat) {\n  try {\n   \n    const response = await axios.get(`${BASE_URL}category?category=${cat}`);\n    console.log(response.data);\n    renderGalleryCat(response.data, cat);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nmainGallery();\n\nrefs.mainGalleryEl.addEventListener('click', onBtnSeeMoreCategory);\n\n// вибір категорії \nfunction onBtnSeeMoreCategory(evt) {\n  if (evt.target.dataset.cat) {\n    mainGalleryCategory(evt.target.dataset.cat);\n  }\n}\n\n// отримання списку категорій\nexport async function getCategoriesList() {\n  return await axios.get(`${BASE_URL}category-list`);\n}\n","// import { getCategoriesList } from './all-requests';\n\n// const categoriesList = document.querySelector('.sidebar__book-categories-list');\n\n// export function markupCategoriesList(categories) {\n//     return categories.map(({list_name}) =>\n//     `<li class=\"category-list-item\">\n//         <button type=\"button\" class=\"category\">\n//             ${list_name}\n//         </button>\n//     </li>`).join(\"\");\n// }\n\n// getCategoriesList().then(catList => {\n//     const categories =\n//         `<li class=\"category-list-item first-elem-js\">\n//         <button type=\"button\" class=\"category all-categories\">\n//             All categories\n//         </button>\n//     </li>` + markupCategoriesList(catList);\n//     categoriesList.innerHTML = categories;\n// }).catch(err => {\n//     categoriesList.innerHTML =\n//         `<li class=\"category-list-item\">\n//             <p class=\"categories-err\">\n//                 The list of categories is empty\n//             </p>\n//         </li>`;\n//     console.log(err);\n// });\n\n\nimport {\n  getCategoriesList,\n  mainGalleryCategory,\n  mainGallery,\n} from './all-requests';\nimport refs from './refs';\n\n// функція створення списку категорій у сайдбарі\nfunction createMarkupCategoriesList(categories) {\n  return categories\n    .map(\n      ({ list_name }) =>\n        `<li class=\"category-list-item\"><button type=\"button\" class=\"category\">${list_name}</button></li>`\n    )\n    .join('');\n}\n\nconst listFillingError =\n  '<li class=\"category-list-item\"><p class=\"categories-err\">The list of categories is empty</p></li>';\n\n// функція відтворення списку категорій\ngetCategoriesList()\n  .then(async resp => {\n    const categories = resp.data;\n    if (categories.length === 0) {\n      refs.categoriesList.innerHTML = listFillingError;\n      return;\n    }\n    const markup =\n      `<li class=\"category-list-item active\"><button type=\"button\" class=\"category category-active\">All categories</button></li>` +\n      createMarkupCategoriesList(categories);\n    refs.categoriesList.innerHTML = markup;\n  })\n  .catch(err => {\n    refs.categoriesList.innerHTML = listFillingError;\n  });\nrefs.categoriesList.addEventListener('click', onCategoryClick);\n\n// функція вибору категорії зі списку\nfunction onCategoryClick(evt) {\n  const categoryName = evt.target;\n  const listOfCategories = [...evt.currentTarget.children];\n  if (categoryName.classList.contains('category')) {\n    if (categoryName.textContent === 'All categories') {\n      removeActive(listOfCategories);\n      activateCategory(categoryName);\n      mainGallery();\n      return;\n    } else {\n      refs.mainGalleryEl.innerHTML = '';\n      mainGalleryCategory(categoryName.textContent);\n    }\n  }\n  if (categoryName.classList.contains('category')) {\n    removeActive(listOfCategories);\n    activateCategory(categoryName);\n  }\n}\n\nrefs.mainGalleryEl.addEventListener('click', onBtnSeeMore);\n\n// функція зміни категорії при натисканні кнопки SeeMore\nfunction onBtnSeeMore(evt) {\n  const categName = evt.target.dataset.cat;\n  const categList = [...refs.categoriesList.children];\n  if (categName) {\n    for (let i = 0; i < categList.length; i++) {\n      if (categList[i].firstChild.textContent === categName) {\n        removeActive(categList)\n        activateCategory(categList[i].firstChild)\n      }\n    }\n  }\n}\n\n// функція активації категорії\nfunction activateCategory(nameOfCategory){\n  nameOfCategory.parentNode.classList.add('active');\n  nameOfCategory.classList.add('category-active');\n}\n\n// функція деактивації категорії\nfunction removeActive(categories) {\n  for (let i = 0; i < categories.length; i++){\n    if ((categories[i].classList.contains('active'))) {\n      categories[i].classList.remove('active');\n        categories[i].firstChild.classList.remove('category-active');\n      }\n    }\n}"],"names":["parcelRequire","$krGWQ","$e28cef2267c62408$export$85cefb2fabc8c0f0","row","map","elem","title","length","_id","book_image","author","split","slice","join","$e28cef2267c62408$export$7dcf25385cf5c147","books","cat","default","mainGalleryEl","innerHTML","idx","Math","trunc","mainGalleryTitleEl","splice","markUp","classList","add","insertAdjacentHTML","$e28cef2267c62408$export$30b0ee8bdb5cac31","remove","window","innerWidth","list_name","$2shzp","async","$02812c325af445d8$export$6794bbbaf63d55ec","get","data","error","console","log","$02812c325af445d8$export$a206ad0fcd59f5cb","response","addEventListener","evt","target","dataset","$ba497dfff31d6266$var$activateCategory","nameOfCategory","parentNode","$ba497dfff31d6266$var$removeActive","categories","i","contains","firstChild","then","resp","categoriesList","markup","$ba497dfff31d6266$var$createMarkupCategoriesList","catch","err","categoryName","listOfCategories","currentTarget","children","textContent","categName","categList"],"version":3,"file":"index.f57e0a55.js.map"}